import{m as P,a0 as M,u as T,a as X,r as b,b as t,X as G,o as p,c as _,w as l,e,d as y,g as r,k as H,f as s,E as m,a2 as J,l as K}from"./index.04828e1d.js";import{A as O}from"./index.4ed55dab.js";import"./axios.91e25212.js";const Q={class:"flex flex-row justify-between"},W=y("div",{class:"font-bold"},"\u65B0\u589E\u7BA1\u7406\u5458",-1),Y=y("div",{class:"text-primaryColor text-[14px] w-full h-full flex flex-row justify-center items-center"}," \u6B63\u5728\u52A0\u8F7D\u56FE\u7247... ",-1),oe={__name:"AddAdminInfo",setup(Z){const h=P(),w=M("baseURL"),k=T(),a=X({admin_name:"",admin_pwd:"",admin_sex:"",admin_tel:"",admin_email:"",admin_photo:"",admin_type:""}),I={admin_name:[{required:!0,message:"\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u59D3\u540D",trigger:"blur"}],admin_pwd:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],admin_sex:[{required:!0,message:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458\u6027\u522B",trigger:"blur"}],admin_tel:[{required:!0,regexp:/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/,message:"\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u7684\u624B\u673A\u53F7",trigger:"blur"}],admin_email:[{required:!0,regexp:/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,message:"\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u90AE\u7BB1",trigger:"blur"}],admin_photo:[{required:!0,message:"\u8BF7\u9009\u62E9\u56FE\u7247",trigger:"blur"}],admin_type:[{required:!0,message:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458\u7C7B\u578B",trigger:"blur"}]},c=b(!1),U=n=>{if(/^image\/(jpe?g|png|webp|gif|bmp)$/.test(n.type)){if(n.size/1024/1024>5)return m({type:"error",title:"\u9519\u8BEF",message:"\u56FE\u7247\u7684\u5927\u5C0F\u4E0D\u80FD\u5927\u4E8E5M"}),!1;c.value=!0}else return m({type:"error",title:"\u9519\u8BEF",message:"\u8BF7\u9009\u62E9\u56FE\u7247\u6587\u4EF6\uFF0C\u56FE\u7247\u683C\u5F0F\u5FC5\u987B\u662Fjpg,jpeg,png,webp,gif,bmp\u683C\u5F0F"}),!1},A=n=>{console.log(n),a.admin_photo=n.data,c.value=!1},f=b(null),j=()=>{f.value.validate(n=>{n?q():m({type:"warning",title:"\u63D0\u793A",message:"\u8BF7\u6B63\u786E\u7684\u586B\u5199\u8868\u5355\u7684\u5185\u5BB9"})})},g=b(!1),q=()=>{g.value=!0,O.adminInfo.add(a).then(n=>{m({type:"success",title:"\u63D0\u793A",message:"\u65B0\u589E\u7BA1\u7406\u5458\u6210\u529F"}),k.replace({name:"AdminInfoList"})}).catch(n=>{m({type:"danger",title:"\u5931\u8D25",message:"\u65B0\u589E\u7BA1\u7406\u5458\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\u6216\u8054\u7CFB\u7BA1\u7406\u5458"}),console.log(n)}).finally(()=>{g.value=!1})},C=()=>{f.value.resetFields()};return(n,o)=>{const D=t("el-link"),u=t("el-input"),i=t("el-form-item"),x=t("el-option"),E=t("el-select"),L=t("el-image"),N=t("el-icon"),R=t("el-upload"),v=t("el-radio"),$=t("el-radio-group"),V=t("el-button"),z=t("el-form"),B=t("el-card"),S=t("page-view"),F=G("loading");return p(),_(S,null,{default:l(()=>[e(B,null,{header:l(()=>[y("div",Q,[W,e(D,{type:"primary",onClick:o[0]||(o[0]=d=>n.$router.replace({name:"AdminInfoList"}))},{default:l(()=>[r("\u8FD4\u56DE\u5217\u8868")]),_:1})])]),default:l(()=>[e(z,{"label-width":"120px",model:a,rules:I,ref_key:"formEl",ref:f},{default:l(()=>[e(i,{label:"\u7BA1\u7406\u5458\u59D3\u540D",prop:"admin_name"},{default:l(()=>[e(u,{placeholder:"\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u540D\u79F0",modelValue:a.admin_name,"onUpdate:modelValue":o[1]||(o[1]=d=>a.admin_name=d)},null,8,["modelValue"])]),_:1}),e(i,{label:"\u7BA1\u7406\u5458\u5BC6\u7801",prop:"admin_pwd"},{default:l(()=>[e(u,{type:"password",placeholder:"\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u5BC6\u7801",modelValue:a.admin_pwd,"onUpdate:modelValue":o[2]||(o[2]=d=>a.admin_pwd=d)},null,8,["modelValue"])]),_:1}),e(i,{label:"\u7BA1\u7406\u5458\u6027\u522B",prop:"admin_sex"},{default:l(()=>[e(E,{placeholder:"\u8BF7\u9009\u62E9\u6027\u522B",class:"w-full",modelValue:a.admin_sex,"onUpdate:modelValue":o[3]||(o[3]=d=>a.admin_sex=d)},{default:l(()=>[e(x,{label:"\u7537",value:"\u7537"}),e(x,{label:"\u5973",value:"\u5973"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"\u7BA1\u7406\u5458\u624B\u673A\u53F7",prop:"admin_tel"},{default:l(()=>[e(u,{placeholder:"\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u624B\u673A\u53F7",modelValue:a.admin_tel,"onUpdate:modelValue":o[4]||(o[4]=d=>a.admin_tel=d)},null,8,["modelValue"])]),_:1}),e(i,{label:"\u7BA1\u7406\u5458\u90AE\u7BB1",prop:"admin_email"},{default:l(()=>[e(u,{placeholder:"\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u90AE\u7BB1",modelValue:a.admin_email,"onUpdate:modelValue":o[5]||(o[5]=d=>a.admin_email=d)},null,8,["modelValue"])]),_:1}),e(i,{label:"\u7BA1\u7406\u5458\u5934\u50CF",prop:"admin_photo"},{default:l(()=>[H((p(),_(R,{"element-loading-text":"\u6B63\u5728\u4E0A\u4F20\u56FE\u7247",action:s(w)+"/adminInfo/uploadAdminPhoto",headers:{softeem_ele_admin_token:s(h).token},name:"admin_photo",class:"w-[200px] h-[200px] border border-dashed border-gray-400 flex flex-row justify-center items-center","before-upload":U,"show-file-list":!1,"on-success":A},{default:l(()=>[a.admin_photo?(p(),_(L,{key:0,src:s(w)+a.admin_photo,fit:"contain",class:"w-full h-full",lazy:""},{placeholder:l(()=>[Y]),_:1},8,["src"])):(p(),_(N,{key:1,size:"65px",color:"lightgray"},{default:l(()=>[e(s(J))]),_:1}))]),_:1},8,["action","headers"])),[[F,c.value]])]),_:1}),e(i,{label:"\u7BA1\u7406\u5458\u7C7B\u578B",prop:"admin_type"},{default:l(()=>[e($,{modelValue:a.admin_type,"onUpdate:modelValue":o[6]||(o[6]=d=>a.admin_type=d)},{default:l(()=>[e(v,{label:"0",name:"type"},{default:l(()=>[r("\u666E\u901A\u7BA1\u7406\u5458")]),_:1}),e(v,{label:"1",name:"type"},{default:l(()=>[r("\u8D85\u7EA7\u7BA1\u7406\u5458")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:l(()=>[e(V,{type:"primary",plain:"",onClick:j,loading:g.value,"loading-icon":s(K)},{default:l(()=>[r(" \u4FDD\u5B58\u6570\u636E ")]),_:1},8,["loading","loading-icon"]),e(V,{type:"danger",plain:"",onClick:C},{default:l(()=>[r("\u91CD\u7F6E\u8868\u5355")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})}}};export{oe as default};
