import{a0 as M,r as P,a as w,W as R,b as l,X as W,o as y,c as K,w as t,e,f as r,g as I,k as S,M as T,t as m,d,Y as X,q as Y,K as Z,Z as G}from"./index.04828e1d.js";import{A as b}from"./index.4ed55dab.js";import"./axios.91e25212.js";const H=(p,u=10)=>(p==null?void 0:p.length)>u?p.substr(0,u)+"\xB7\xB7\xB7":p,J=d("div",{class:"font-bold"},"\u9910\u70B9\u5217\u8868",-1),O=d("span",{class:"ml-[5px]"},"\u67E5\u8BE2",-1),Q={class:"flex flex-row justify-between items-center"},ee={class:"ml-[10px] w-[80px] text-[12px]"},te=d("span",{class:"ml-[3px]"},"\u7F16\u8F91",-1),oe=d("span",{class:"ml-[3px]"},"\u5220\u9664",-1),le={class:"flex flex-row justify-between items-center mt-[10px]"},ne={class:"text-[14px]"},ce={__name:"FoodInfoList",setup(p){const u=M("baseURL"),f=P(!1),i=w({food_name:"",category_name:"",pageIndex:1}),c=w({listData:[],pageCount:0,totalCount:0}),g=()=>{f.value=!0,b.foodInfo.getListByPage(i).then(n=>{c.listData=n.listData,c.pageCount=n.pageCount,c.totalCount=n.totalCount}).finally(()=>{f.value=!1})},V=n=>{i.pageIndex=n,g()},k=(n,a)=>{b.foodInfo.setFoodInfoWeight({id:a,weight:n})},D=n=>{b.foodInfo.deleteById(n).then(a=>{ElNotification({type:"success",title:"\u5220\u9664\u6210\u529F",message:"\u5F53\u524D\u83DC\u54C1\u5220\u9664\u6210\u529F"}),g()}).catch(a=>{ElNotification({type:"danger",title:"\u5220\u9664\u5931\u8D25",message:"\u5F53\u524D\u83DC\u54C1\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u5237\u65B0\u91CD\u8BD5\u6216\u8054\u7CFB\u7BA1\u7406\u5458"})})};return R(()=>{g()}),(n,a)=>{const C=l("el-input"),v=l("el-form-item"),x=l("el-icon"),h=l("el-button"),B=l("el-form"),s=l("el-table-column"),U=l("el-image"),$=l("el-link"),E=l("el-popover"),F=l("el-slider"),N=l("el-popconfirm"),L=l("el-table"),j=l("el-pagination"),q=l("el-card"),A=l("page-view"),z=W("loading");return y(),K(A,null,{default:t(()=>[e(q,null,{header:t(()=>[J]),default:t(()=>[e(B,{model:i,inline:!0},{default:t(()=>[e(v,{label:"\u9910\u70B9\u540D\u79F0"},{default:t(()=>[e(C,{placeholder:"\u8BF7\u8F93\u5165\u9910\u70B9\u540D\u79F0",modelValue:i.food_name,"onUpdate:modelValue":a[0]||(a[0]=o=>i.food_name=o)},null,8,["modelValue"])]),_:1}),e(v,{label:"\u5206\u7C7B\u540D\u79F0"},{default:t(()=>[e(C,{placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",modelValue:i.category_name,"onUpdate:modelValue":a[1]||(a[1]=o=>i.category_name=o)},null,8,["modelValue"])]),_:1}),e(v,null,{default:t(()=>[e(h,{type:"primary",plain:"",onClick:g,loading:f.value},{default:t(()=>[e(x,null,{default:t(()=>[e(r(X))]),_:1}),O]),_:1},8,["loading"]),e(h,{plain:"",type:"success",icon:r(Y),onClick:a[2]||(a[2]=o=>n.$router.push({name:"AddFoodInfo"}))},{default:t(()=>[I(" \u65B0\u589E\u9910\u70B9 ")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),S((y(),T("div",null,[e(L,{data:c.listData,border:"",stripe:"","max-height":"450"},{default:t(()=>[e(s,{label:"id",prop:"id",width:"70",align:"center"}),e(s,{label:"\u9910\u70B9\u540D\u79F0",prop:"food_name",width:"150",align:"center"}),e(s,{label:"\u9910\u70B9\u5206\u7C7B",prop:"categoryInfo.category_name",align:"center",width:"120"}),e(s,{label:"\u4EF7\u683C",prop:"price",width:"100",align:"center"}),e(s,{label:"\u9500\u552E\u6570\u91CF",prop:"saleCount",width:"100",align:"center"}),e(s,{label:"\u9910\u70B9\u56FE\u7247",width:"120",align:"center"},{default:t(({row:o})=>[e(U,{src:r(u)+o.food_img,class:"w-[60px] h-[60px]",fit:"cover","preview-src-list":[r(u)+o.food_img],"preview-teleported":!0},null,8,["src","preview-src-list"])]),_:1}),e(s,{label:"\u9910\u70B9\u7B80\u8FF0",align:"center"},{default:t(({row:o,column:_,$index:ae})=>[e(E,{placement:"top-start",title:"\u9910\u70B9\u8BE6\u60C5",width:"300",trigger:"hover",content:o.food_desc},{reference:t(()=>[e($,{type:"info",underline:!1},{default:t(()=>[I(m(r(H)(o.food_desc,15)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1}),e(s,{label:"\u9910\u70B9\u6743\u91CD",width:"330"},{default:t(({row:o})=>[d("div",Q,[e(F,{min:0,max:100,step:.1,modelValue:o.weight,"onUpdate:modelValue":_=>o.weight=_,class:"w-[250px]",onChange:_=>k(_,o.id)},null,8,["step","modelValue","onUpdate:modelValue","onChange"]),d("span",ee,m(o.weight),1)])]),_:1}),e(s,{label:"\u64CD\u4F5C",width:"170px",align:"center"},{default:t(({row:o})=>[e(h,{type:"warning",plain:"",size:"small",onClick:_=>n.$router.push({name:"EditFoodInfo",params:{id:o.id}})},{default:t(()=>[e(x,null,{default:t(()=>[e(r(Z))]),_:1}),te]),_:2},1032,["onClick"]),e(N,{title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:_=>D(o.id)},{reference:t(()=>[e(h,{type:"danger",plain:"",size:"small"},{default:t(()=>[e(x,null,{default:t(()=>[e(r(G))]),_:1}),oe]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),d("div",le,[d("div",ne,"\u5F53\u524D\u7B2C"+m(i.pageIndex)+"\u9875\uFF0C\u5171"+m(c.pageCount)+"\u9875\uFF0C\u5171"+m(c.totalCount)+"\u6761 ",1),e(j,{background:"",layout:"prev, pager, next",total:c.totalCount,onCurrentChange:V},null,8,["total"])])])),[[z,f.value]])]),_:1})]),_:1})}}};export{ce as default};
