import{r as C,a0 as P,a as w,W as R,b as a,X as z,o as f,c as O,w as t,e,M as y,N as S,O as T,f as i,g as W,k as X,d as u,t as g,Y,q as Z,Z as $}from"./index.0900bba9.js";import{A as V}from"./index.27c45aec.js";import"./axios.91e25212.js";const G=u("div",{class:"font-bold"},"\u7528\u6237\u4FE1\u606F\u5217\u8868",-1),H=u("span",{class:"ml-[5px]"},"\u67E5\u8BE2",-1),J=u("span",{class:"ml-[3px]"},"\u5220\u9664",-1),K={class:"flex flex-row justify-between items-center mt-[10px]"},Q={class:"text-[14px]"},ne={__name:"CustomerInfoList",setup(ee){const _=C(!1),v=P("baseURL"),n=w({pageIndex:"1",nickName:"",user_phone:"",user_sex:""}),s=w({listData:[],pageCount:0,totalCount:0}),d=()=>{_.value=!0,V.customerInfo.getListByPage(n).then(o=>{console.log(o),s.listData=o.listData,s.pageCount=o.pageCount,s.totalCount=o.totalCount}).catch(o=>{}).finally(()=>{_.value=!1})};R(()=>{d()});const k=o=>{V.customerInfo.deleteById(o).then(()=>{ElNotification({type:"success",title:"\u5220\u9664\u6210\u529F",message:"\u5F53\u524D\u7528\u6237\u4FE1\u606F\u5220\u9664\u6210\u529F"}),queryData()}).catch(()=>{ElNotification({type:"error",title:"\u5220\u9664\u5931\u8D25",message:"\u5F53\u524D\u7528\u6237\u4FE1\u606F\u5220\u9664\u5931\u8D25,\u8BF7\u5237\u65B0\u6216\u8005\u8054\u7CFB\u7BA1\u7406\u5458"})})},D=o=>{n.pageIndex=o,d()},b=C(""),N=[{value:"\u7537",label:"\u7537"},{value:"\u5973",label:"\u5973"}];return(o,r)=>{const h=a("el-input"),p=a("el-form-item"),I=a("el-option"),B=a("el-select"),x=a("el-icon"),m=a("el-button"),L=a("el-form"),c=a("el-table-column"),U=a("el-image"),q=a("el-popconfirm"),E=a("el-table"),j=a("el-pagination"),A=a("el-card"),F=a("page-view"),M=z("loading");return f(),O(F,null,{default:t(()=>[e(A,null,{header:t(()=>[G]),default:t(()=>[e(L,{model:n,inline:!0},{default:t(()=>[e(p,{label:"\u7528\u6237\u6635\u79F0"},{default:t(()=>[e(h,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0",modelValue:n.nickName,"onUpdate:modelValue":r[0]||(r[0]=l=>n.nickName=l)},null,8,["modelValue"])]),_:1}),e(p,{label:"\u6027\u522B"},{default:t(()=>[e(B,{modelValue:b.value,"onUpdate:modelValue":r[1]||(r[1]=l=>b.value=l),"v-model":n.user_sex,class:"m-2",placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[(f(),y(T,null,S(N,l=>e(I,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","v-model"])]),_:1}),e(p,{label:"\u624B\u673A\u53F7\u7801"},{default:t(()=>[e(h,{placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801",modelValue:n.user_phone,"onUpdate:modelValue":r[2]||(r[2]=l=>n.user_phone=l)},null,8,["modelValue"])]),_:1}),e(p,null,{default:t(()=>[e(m,{type:"primary",plain:"",onClick:d},{default:t(()=>[e(x,null,{default:t(()=>[e(i(Y))]),_:1}),H]),_:1}),e(m,{plain:"",type:"success",icon:i(Z)},{default:t(()=>[W("\u65B0\u589E\u5206\u7C7B")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),X((f(),y("div",null,[e(E,{data:s.listData,border:"",stripe:"","max-height":"450"},{default:t(()=>[e(c,{prop:"id",label:"id",align:"center",width:"100"}),e(c,{prop:"nickName",label:"\u6635\u79F0",align:"center",width:"140"}),e(c,{label:"\u5934\u50CF",align:"center",width:"160"},{default:t(({row:l})=>[e(U,{src:i(v)+l.user_photo,class:"w-[60px] h-[60px]",fit:"cover","preview-src-list":[i(v)+l.user_photo],"preview-teleported":!0},null,8,["src","preview-src-list"])]),_:1}),e(c,{prop:"user_sex",label:"\u6027\u522B",align:"center",width:"100"}),e(c,{prop:"user_phone",label:"\u624B\u673A\u53F7",align:"center",width:"240"}),e(c,{prop:"user_email",label:"\u90AE\u7BB1",align:"center",width:"300"}),e(c,{label:"\u64CD\u4F5C",align:"center"},{default:t(({row:l})=>[e(q,{title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:te=>k(l.id)},{reference:t(()=>[e(m,{type:"danger",plain:"",size:"small"},{default:t(()=>[e(x,null,{default:t(()=>[e(i($))]),_:1}),J]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),u("div",K,[u("div",Q," \u5F53\u524D\u7B2C"+g(n.pageIndex)+"\u9875\uFF0C\u5171"+g(s.pageCount)+"\u9875\uFF0C\u5171"+g(s.totalCount)+"\u6761 ",1),e(j,{background:"",layout:"prev, pager, next",total:s.totalCount,onCurrentChange:D},null,8,["total"])])])),[[M,_.value]])]),_:1})]),_:1})}}};export{ne as default};
