import{_ as G,m as H,a0 as J,u as K,a as Q,r as _,b as t,X as W,o as d,c as i,w as e,e as o,d as m,g as f,M as Y,N as Z,O as ee,k as oe,f as u,t as le,E as c,a2 as te,l as ae,p as se,i as ne}from"./index.0900bba9.js";import{A as I}from"./index.f934675c.js";import"./axios.91e25212.js";const V=p=>(se("data-v-0f2e3e9b"),p=p(),ne(),p),re={class:"flex flex-row justify-between"},de=V(()=>m("div",{class:"font-bold"},"\u65B0\u589E\u9910\u70B9",-1)),ie=V(()=>m("div",{class:"text-primaryColor text-[14px] w-full h-full flex flex-row justify-center items-center"}," \u6B63\u5728\u52A0\u8F7D\u56FE\u7247...",-1)),ue={class:"w-[350px] flex flex-row items-center"},ce={__name:"AddFoodInfo",setup(p){const k=H(),w=J("baseURL"),F=K(),l=Q({food_name:"",price:0,cid:"",food_desc:"",food_img:"",weight:0}),U={food_name:[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u54C1\u540D\u79F0",trigger:"blur"}],price:[{required:!0,message:"\u4EF7\u683C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],cid:[{required:!0,message:"\u8BF7\u9009\u62E9\u83DC\u54C1\u5206\u7070",trigger:"blur"}],food_desc:[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u54C1\u7684\u63CF\u8FF0\u4FE1\u606F",trigger:"blur"}],food_img:[{required:!0,message:"\u8BF7\u9009\u62E9\u83DC\u54C1\u56FE\u7247",trigger:"blur"}],weight:[{required:!0,message:"\u8BF7\u9009\u62E9\u83DC\u54C1\u7684\u6743\u91CD",trigger:"blur"}]},y=_([]);I.categoryInfo.getAllList().then(s=>y.value=s);const g=_(!1),j=s=>{if(/^image\/(jpe?g|png|webp|gif|bmp)$/.test(s.type)){if(s.size/1024/1024>5)return c({type:"error",title:"\u9519\u8BEF",message:"\u56FE\u7247\u7684\u5927\u5C0F\u4E0D\u80FD\u5927\u4E8E5M"}),!1;g.value=!0}else return c({type:"error",title:"\u9519\u8BEF",message:"\u8BF7\u9009\u62E9\u56FE\u7247\u6587\u4EF6\uFF0C\u56FE\u7247\u683C\u5F0F\u5FC5\u987B\u662Fjpg,jpeg,png,webp,gif,bmp\u683C\u5F0F"}),!1},C=s=>{l.food_img=s.data,g.value=!1},b=_(null),L=()=>{b.value.validate(s=>{s?S():c({type:"warning",title:"\u63D0\u793A",message:"\u8BF7\u6B63\u786E\u7684\u586B\u5199\u8868\u5355\u7684\u5185\u5BB9"})})},v=_(!1),S=()=>{v.value=!0,I.foodInfo.add(l).then(s=>{c({type:"success",title:"\u63D0\u793A",message:"\u65B0\u589E\u83DC\u54C1\u6210\u529F"}),F.replace({name:"FoodInfoList"})}).catch(s=>{c({type:"danger",title:"\u5931\u8D25\u4E86",message:"\u65B0\u589E\u83DC\u54C1\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\u6216\u8054\u7CFB\u7BA1\u7406\u5458"}),console.log(s)}).finally(()=>{v.value=!1})},q=()=>{b.value.resetFields()};return(s,n)=>{const A=t("el-link"),x=t("el-input"),r=t("el-form-item"),D=t("el-input-number"),E=t("el-option"),N=t("el-select"),B=t("el-image"),R=t("el-icon"),z=t("el-upload"),$=t("el-slider"),M=t("el-tag"),h=t("el-button"),O=t("el-form"),P=t("el-card"),T=t("page-view"),X=W("loading");return d(),i(T,null,{default:e(()=>[o(P,null,{header:e(()=>[m("div",re,[de,o(A,{type:"primary",onClick:n[0]||(n[0]=a=>s.$router.replace({name:"FoodInfoList"}))},{default:e(()=>[f("\u8FD4\u56DE\u5217\u8868")]),_:1})])]),default:e(()=>[o(O,{"label-width":"120px",model:l,rules:U,ref_key:"formEl",ref:b},{default:e(()=>[o(r,{label:"\u9910\u70B9\u540D\u79F0",prop:"food_name"},{default:e(()=>[o(x,{placeholder:"\u8BF7\u8F93\u5165\u9910\u70B9\u540D\u79F0",modelValue:l.food_name,"onUpdate:modelValue":n[1]||(n[1]=a=>l.food_name=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"\u9910\u70B9\u4EF7\u683C",prop:"price"},{default:e(()=>[o(D,{min:0,modelValue:l.price,"onUpdate:modelValue":n[2]||(n[2]=a=>l.price=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"\u9910\u70B9\u5206\u7C7B",prop:"cid"},{default:e(()=>[o(N,{placeholder:"\u8BF7\u9009\u62E9\u9910\u70B9\u5206\u7C7B",class:"w-full",modelValue:l.cid,"onUpdate:modelValue":n[3]||(n[3]=a=>l.cid=a)},{default:e(()=>[(d(!0),Y(ee,null,Z(y.value,a=>(d(),i(E,{key:a.id,value:a.id,label:a.category_name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"\u9910\u70B9\u56FE\u7247",prop:"food_img"},{default:e(()=>[oe((d(),i(z,{"element-loading-text":"\u6B63\u5728\u4E0A\u4F20\u56FE\u7247...",action:u(w)+"/foodInfo/uploadFoodImg",headers:{softeem_ele_admin_token:u(k).token},name:"food_img",class:"w-[200px] h-[200px] border border-dashed border-gray-400 flex flex-row justify-center items-center","before-upload":j,"show-file-list":!1,"on-success":C},{default:e(()=>[l.food_img?(d(),i(B,{key:0,src:u(w)+l.food_img,fit:"contain",class:"w-full h-full",lazy:""},{placeholder:e(()=>[ie]),_:1},8,["src"])):(d(),i(R,{key:1,size:"65px",color:"#808080"},{default:e(()=>[o(u(te))]),_:1}))]),_:1},8,["action","headers"])),[[X,g.value]])]),_:1}),o(r,{label:"\u9910\u70B9\u63CF\u8FF0",prop:"food_desc"},{default:e(()=>[o(x,{placeholder:"\u8BF7\u8F93\u5165\u83DC\u54C1\u63CF\u8FF0\u4FE1\u606F",type:"textarea",rows:5,modelValue:l.food_desc,"onUpdate:modelValue":n[4]||(n[4]=a=>l.food_desc=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"\u9910\u70B9\u6743\u91CD",prop:"weight"},{default:e(()=>[m("div",ue,[o($,{modelValue:l.weight,"onUpdate:modelValue":n[5]||(n[5]=a=>l.weight=a),min:0,max:100,step:.1},null,8,["modelValue","step"]),o(M,{class:"w-[30px] ml-10"},{default:e(()=>[f(le(l.weight),1)]),_:1})])]),_:1}),o(r,null,{default:e(()=>[o(h,{type:"success",plain:"",onClick:L,loading:v.value,"loading-icon":u(ae)},{default:e(()=>[f(" \u4FDD\u5B58\u6570\u636E ")]),_:1},8,["loading","loading-icon"]),o(h,{type:"warning",plain:"",onClick:q},{default:e(()=>[f("\u91CD\u7F6E\u8868\u5355")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})}}},me=G(ce,[["__scopeId","data-v-0f2e3e9b"]]);export{me as default};
